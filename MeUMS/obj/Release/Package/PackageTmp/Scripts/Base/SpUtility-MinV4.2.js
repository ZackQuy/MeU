/*SpBaseGridPanelV42.js+SpMessageBox.js+SpStatisticalChart.js+SpStatisticalDataSource.js+SpTreePanel.js*/
Sp.BaseGridPanel=function(a,b,c){b=b==null?{}:b;if(typeof a!="string")throw"\u53c2\u6570containerId\u5e94\u4e3aString";if(b.dataType!="remote")b.dataType="local";if(b.data==null)throw"\u53c2\u6570data\u5fc5\u987b\u8bbe\u7f6e\u53c2\u6570;\u5f53dataType\u4e3alocal\u65f6\u5019\uff0cdata\u4e3a\u6570\u7ec4;dataType\u4e3aremote\u65f6\u5019\uff0cdata\u4e3a\u8bf7\u6c42\u5730\u5740";this._config=b;this._gridDivId=a;this._isRender=b.isRender==null?!0:b.isRender;this._context=c==null?{}:c;this._title=b.title;
this._tools=b.tools==null?void 0:b.tools;this._tbar=b.tbar==null?void 0:b.tbar;this._closable=b.closable==null?void 0:b.closable;this._bbarAble=b.bbar==null?!0:b.bbar;this._selModel=b.sm==null?void 0:b.sm;this._fieldArray=b.fieldArray==null?null:b.fieldArray;this._columnModel=b.columnModel==null?null:b.columnModel;this._pageSize=b.pageSize==null?15:b.pageSize;this._dataType=b.dataType;this._data=b.data;this._gridId=this._gridDivId+"grid";this._gridPTbarId=this._gridId+"pageToolbar";this._gridEventName=
[];this._storeEventName=[];this._eventList={};this._store=this._grid=null};
Sp.BaseGridPanel.prototype={AddEvent:function(a,b,c){var e=null;e=null!=b.scope?Sp.Delegate(c,b):b;if(!Array.contains(this._gridEventName,a)&&(Array.add(this._gridEventName,a),this._eventList[a]=e,null!=this._grid))this._grid.on(a,this._eventList[a])},RemoveEvent:function(a){null!=this._grid&&this._grid.un(a,this._eventList[a]);Array.remove(this._gridEventName,a);this._eventList[a]=void 0},RemoveAllEvent:function(){null!=this._grid&&Array.forEach(this._gridEventName,function(a){this._grid.un(a,this._eventList[a]);
this._eventList[a]=void 0},this);Array.clear(this._gridEventName);null!=this._store&&Array.forEach(this._storeEventName,function(a){this._store.un(a,this._eventList[a]);this._eventList[a]=void 0},this);Array.clear(this._storeEventName)},AddOnBeforeLoadAction:function(a){if(!Array.contains(this._storeEventName,"beforeload")&&(Array.add(this._storeEventName,"beforeload"),this._eventList.beforeload=a,null!=this._store))this._store.on("beforeload",this._eventList.beforeload)},RemoveOnBeforeLoadAction:function(){null!=
this._store&&this._store.un("beforeload",this._eventList.beforeload);Array.remove(this._storeEventName,"beforeload");this._eventList.beforeload=void 0},AddOnLoadAction:function(a){if(!Array.contains(this._storeEventName,"load")&&(Array.add(this._storeEventName,"load"),this._eventList.load=a,null!=this._store))this._store.on("load",this._eventList.load)},RemoveOnLoadAction:function(){null!=this._grid&&this._store.un("load",this._eventList.load);Array.remove(this._storeEventName,"load");this._eventList.load=
void 0},AddOnExceptionAction:function(a){if(!Array.contains(this._storeEventName,"exception")&&(Array.add(this._storeEventName,"exception"),this._eventList.exception=a,null!=this._store))this._store.on("exception",this._eventList.exception)},RemoveOnExceptionAction:function(){null!=this._store&&this._store.un("exception",this._eventList.exception);Array.remove(this._storeEventName,"exception");this._eventList.exception=void 0},Execute:function(){this._grid=Ext.getCmp(this._gridId);this._CreateStore(this._dataType,
this._data);if(null!=this._grid)this._grid.destroy(),this._grid=null;var a={id:this._gridId,autoScroll:!0,enableColumnMove:!1,autoDestroy:!0,columnLines:!0,pageSize:this._pageSize,frame:!0,region:"center",store:this._store,selModel:this._selModel,tbar:this._tbar,columns:this._columnModel,tools:this._tools,loadMask:!0,viewConfig:{loadMask:{msg:"\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u7b49..."},stripeRows:!0},bbar:{xtype:"pagingtoolbar",store:this._store,id:this._gridPTbarId,displayInfo:!0,
refreshText:"",displayMsg:"\u5171{2}\u6761\u8bb0\u5f55",emptyMsg:"\u6ca1\u6709\u8bb0\u5f55"}};this._bbarAble||(a=Sp.apply(a,{bbar:void 0}));null!=this._closable&&(a=Sp.applyIf(a,{closable:this._closable}));null!=this._title&&void 0!=this._title&&(a=Sp.applyIf(a,{title:this._title}));null!=this._config.viewConfig&&void 0!=this._config.viewConfig&&Sp.applyIf(a.viewConfig,this._config.viewConfig);this._grid=Ext.create("Ext.grid.Panel",a);this._store.loadPage(1);Array.forEach(this._gridEventName,function(a){this._grid.on(a,
this._eventList[a])},this);this._isRender&&this.RenderGrid()},Reconfigure:function(a,b){if(a!=""&&a!=null)this._fieldArray=a;if(b!=""&&b!=null)this._columnModel=b;this._grid=Ext.getCmp(this._gridId);this._CreateStore(this._dataType,this._data);if(null!=this._grid){this._grid.reconfigure(this._store,this._columnModel);var c=Ext.getCmp(this._gridPTbarId);null!=c&&c.bind(this._store);this._store.loadPage(1)}},RenderGrid:function(){this._grid.render(this._gridDivId);this._grid.setWidth($("#"+this._gridDivId).width());
this._title!=null&&this._title!=void 0&&this._title!=""?this._grid.setHeight($("#"+this._gridDivId).height()-28):this._grid.setHeight($("#"+this._gridDivId).height())},GetGrid:function(){return this._grid},GetSelectionModel:function(){return this._grid.getSelectionModel().getSelection()},GetStore:function(){return this._store},Refresh:function(){this._store&&this._store.load()},LoadData:function(a,b){this._data=a;this._store&&(this._store.proxy.SetData(a,b),this._store.loadPage(1))},SetData:function(a){this._data=
a},GetView:function(){var a=null;null!=this._grid&&(a=this._grid.getView());return a},SetTitle:function(a){this._title=a;null!=this._grid&&this._grid.setTitle(a)},SetFieldArray:function(a){this._fieldArray=a},GetFieldArray:function(){return this._fieldArray},SetCM:function(a){if(typeof a!="object")throw"\u53c2\u6570cm\u5e94\u4e3aobject";this._columnModel=a},GetCM:function(){return this._columnModel},SetWidth:function(a){this._grid=Ext.getCmp(this._gridId);null!=this._grid&&this._grid.setWidth(a)},
SetHeight:function(a){null!=this._grid&&this._grid.setHeight(a)},SwitchPageSize:function(a){this._pageSize=a;var b=Ext.getCmp(this._gridPTbarId);if(null!=b)b.pageSize=a;if(null!=this._store)this._store.pageSize=a},AddCls:function(a){null!=this._grid&&this._grid.addCls(a)},RemoveCls:function(a){null!=this._grid&&this._grid.removeCls(a)},Destroy:function(){if(null!=this._grid)this._grid.destroy(),this._grid=null;this.RemoveAllEvent()},_CreateStore:function(a,b){if(this._fieldArray.length<1)throw"\u53c2\u6570fieldArray\u672a\u8bbe\u7f6e\uff0c\u8bf7\u8c03\u7528SetFieldArray";
switch(a){case "local":b==null&&(b=[]);this._store=Ext.create("Ext.data.Store",{fields:this._fieldArray,pageSize:this._pageSize,proxy:{data:b,type:"pagingmemory",reader:{type:"json"}}});break;case "remote":if(typeof b!="string")throw"\u53c2\u6570remote\u5e94\u4e3astring";this._store=Ext.create("Ext.data.Store",{remoteSort:!0,pageSize:this._pageSize,fields:this._fieldArray,proxy:{type:"ajax",url:b,reader:Ext.create("Ext.ux.SpJsonReader",{type:"json",root:"attributes",totalProperty:"total"})}});Array.forEach(this._storeEventName,
function(a){this._store.on(a,this._eventList[a])},this);break;default:throw"\u53c2\u6570dataType\u503c\u65e0\u6548\uff01";}}};Sp.RemoteGridPanel=Sp.extend(Sp.BaseGridPanel,{constructor:function(a,b,c){b=b==null?{}:b;b.data="GetActionHandler.ashx";b.dataType="remote";Sp.RemoteGridPanel.superclass.constructor.apply(this,[a,b,c])}});Sp.Msg={version:"1.0.1"};
Sp.apply(Sp.Msg,{alert:function(a,b,c){void 0==a&&(a="\u8bf7\u6dfb\u52a0\u63d0\u793a\u4fe1\u606f\uff01");var e,f=null;!1!=c&&(f=function(){var a=this,b=3,c=function(){a.title(b+"\u79d2\u540e\u5173\u95ed");!b&&a.close();b--};e=setInterval(c,1E3);c()});return art.dialog({id:"Alert",content:a,opacity:0.5,left:"48%",top:"40%",icon:b,lock:!0,fixed:!0,drag:!1,ok:!0,init:f,close:function(){clearInterval(e)}})},confirm:function(a,b,c,e,f){if(Sp.isFunction(b))if(Sp.isFunction(c))return art.dialog({title:"\u63d0\u793a",id:"Confirm",
icon:"question",fixed:!0,lock:!0,opacity:0.3,content:a,okVal:e==null?"\u786e\u5b9a":e,cancelVal:f==null?"\u53d6\u6d88":f,ok:function(a){return b.call(this,a)},cancel:function(a){return c&&c.call(this,a)}});else this.Alert("\u53d6\u6d88\u6309\u94ae\u56de\u8c03\u51fd\u6570\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u8bbe\u7f6e\u6b63\u786e\u7684\u56de\u8c03\u51fd\u6570","error");else this.Alert("\u786e\u5b9a\u6309\u94ae\u56de\u8c03\u51fd\u6570\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u8bbe\u7f6e\u6b63\u786e\u7684\u56de\u8c03\u51fd\u6570",
"error")},customConfirm:function(a,b,c,e){if(!Sp.isString(a))throw"content\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff01";if(b==null||b.length<1)throw"button\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u53c2\u8003\u5e2e\u52a9\u6587\u6863";return art.dialog({id:"customConfirm",title:e==null?"\u63d0\u793a":e,fixed:!0,lock:!0,opacity:0.3,content:a,button:b,icon:c==null?"question":c})},notice:function(a,b,c){if(null==a||void 0==a)a="\u8bf7\u6dfb\u52a0\u63d0\u793a\u4fe1\u606f\uff01";if(null==b||
void 0==b)b="face-sad";if(null==c||void 0==c)c="Notice";return art.dialog.notice({width:220,content:a,id:c,icon:b,time:5})},getMsgWin:function(a){var b=null;null!=art.dialog.list[a]&&(b=art.dialog.list[a]);return b},getAllMsgWin:function(){return art.dialog.list},closeMsgWin:function(a){null!=art.dialog.list[a]&&art.dialog.list[a].close()},closeAllMsgWin:function(){var a=art.dialog.list,b;for(b in a)a[b].close()}});
artDialog.notice=function(a){var b=a||{},c,e,f,g,d;a={left:"100%",top:"100%",fixed:!0,drag:!1,resize:!1,follow:null,lock:!1,init:function(a){c=this;e=c.config;g=c.DOM.wrap;d=parseInt(g[0].style.top);f=d+g[0].offsetHeight;g.css("top",f+"px").animate({top:d+"px"},800,function(){b.init&&b.init.call(c,a)})},close:function(a){g.animate({top:f+"px"},800,function(){b.close&&b.close.call(this,a);e.close=$.noop;c.close()});return!1}};for(var h in b)a[h]===void 0&&(a[h]=b[h]);return artDialog(a)};Sp.StatisticalChartBase={list:{},AddEvent:function(a,b){this.list[a]=b},RemoveEvent:function(a){this.list[a]=void 0},_RaiseEvent:function(a){var b=a.split(",");if(null==b[0])alert("\u56de\u8c03\u51fd\u6570\u4e2d\u7684funName\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a\uff01");else if(Sp.isFunction(this.list[b[0]]))this.list[b[0]](a.substring(a.indexOf(",")+1));else alert("\u914d\u7f6e\u6587\u4ef6\u4e2dfunName\u5c5e\u6027\u4e0e\u4f20\u5165\u7684\u4e8b\u4ef6\u540d\u79f0\u4e0d\u4e00\u81f4\uff01")}};
Sp.StatisticalChart=function(a,b,c){b=b==null?{}:b;this._context=c==null?{}:c;if(typeof a!="string")throw"\u53c2\u6570containerId\u5e94\u4e3aString";if(null==b.chartType)throw"\u53c2\u6570chartType\u4e0d\u80fd\u4e3a\u7a7a";if(null==b.data)throw"\u53c2\u6570data\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u503c\u4e3a\u6570\u7ec4\u5bf9\u8c61";this._oldChartAttribute=b.chartAttr==null?{}:b.chartAttr;this._divId=a;this._chart=null;this._chartId=this._divId+"chart";this._chartType=b.chartType;this._data=b.data;this._baseChartAttribute=
{caption:"\u4fe1\u606f\u6c47\u603b\u56fe\u8868",unescapeLinks:"0",formatNumberScale:"0",decimals:"2",adjustDiv:"0",yAxisValueDecimals:"0",yAxisMinValue:"0",yAxisMaxValue:"18",numDivLines:"3",showLegend:"1",exportEnabled:"1",exportDialogMessage:"\u6b63\u5728\u751f\u6210\u5bfc\u51fa\u56fe\u7247  "};this._chartAttribute={};this._callBackName=null};
Sp.StatisticalChart.prototype={Execute:function(){try{this._Dispose(),this._chart=new FusionCharts("PlugIns/FusionCharts/"+this._chartType+".swf",this._chartId,"100%","100%","0","1"),this._chart.setJSONData(this._FormatData()),this._chart.configure({ChartNoDataText:"\u65e0\u6570\u636e\u663e\u793a",InvalidXMLText:"\u8bf7\u68c0\u67e5\u6570\u636e\u683c\u5f0f\u662f\u5426\u6b63\u786e",ParsingDataText:"\u6b63\u5728\u52a0\u8f7d\u6570\u636e......"}),this._chart.render(this._divId),this._AddLinkChartEvent(this._data.callback)}catch(a){throw"\u7edf\u8ba1\u56fe\u8868\u751f\u6210\u5931\u8d25\uff01\u8bf7\u68c0\u67e5\u914d\u7f6e\u53c2\u6570\u662f\u5426\u6b63\u786e\uff01";
}},GetChart:function(){return FusionCharts(this._chartId)},SetChartAttribute:function(a){if(null==this._chart)throw"\u5f53\u524d\u56fe\u8868\u63a7\u4ef6\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u8bf7\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5728\u8c03\u7528\u8be5\u65b9\u6cd5\uff01";Sp.apply(this._chartAttribute,a);this._chart.setChartAttribute(a)},UpdateChart:function(a){if(null==a||a.length<1)throw"\u53c2\u6570data\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u503c\u4e3a\u6570\u7ec4\u5bf9\u8c61";this._data=a;if(null==this._chart)throw"\u5f53\u524d\u56fe\u8868\u63a7\u4ef6\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u8bf7\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5728\u8c03\u7528\u8be5\u65b9\u6cd5\uff01";
this._chart.setJSONData(this._FormatData());this._AddLinkChartEvent(this._data.callback)},SwitchChart:function(a,b,c){this._chartType=a;this._data=b;this._oldChartAttribute=c;this.Execute()},ExportByServer:function(a,b,c,e){if(null==a)throw"\u670d\u52a1\u5668\u5904\u7406\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u5fc5\u987b\u4e3a\u6709\u6548\u5730\u5740\uff01";null==b&&(b="png");if(b=="png"||b=="jpg"||b=="jpeg"||b=="png"||b=="gif")if(null==c&&(c="download"),c=="download"||c=="save")this._chart.hasRendered&&
this._chart.hasRendered()?this._chart.exportChart({exportAtClient:"0",exportAction:c,exportHandler:a,exportCallback:e,exportFormat:b,exportFileName:escape(this._chart.getChartAttribute("caption"))}):alert("\u8bf7\u7b49\u5f85\u7edf\u8ba1\u56fe\u8868\u52a0\u8f7d\u5b8c\u6bd5\u540e\u518d\u8bd5\uff01");else throw"\u5bfc\u51fa\u7c7b\u578b\u4e0d\u652f\u6301\uff0c\u503c\u4e3asave\u3001download\u4e4b\u4e00\uff01";else throw"\u5bfc\u51fa\u683c\u5f0f\u4e0d\u652f\u6301\uff0c\u503c\u4e3apdf\u3001jpg\u3001jpeg\u3001png\u3001gif\u4e4b\u4e00\uff01";
},Destroy:function(){this._Dispose()},_AddLinkChartEvent:function(a){null!=this._callBackName&&Sp.StatisticalChartBase.RemoveEvent(this._callBackName);if(null!=a.funName&&Sp.isFunction(a.fn))this._callBackName=a.funName,Sp.StatisticalChartBase.AddEvent(this._callBackName,a.fn)},_FormatData:function(){Sp.applyIf(this._chartAttribute,this._baseChartAttribute);Sp.applyIf(this._chartAttribute,this._oldChartAttribute);if(null!=this._data.max&&this._data.max>0)this._chartAttribute.yAxisMaxValue=Math.ceil(this._data.max/
4)*4;Sp.apply(this._chartAttribute,this._data.chartAttr);var a={};switch(this._chartType){case Sp.SChartTypeEnum.Column2D:case Sp.SChartTypeEnum.Column3D:case Sp.SChartTypeEnum.Line:case Sp.SChartTypeEnum.Bar2D:a=this._GetSingleJsonData();break;case Sp.SChartTypeEnum.Pie2D:case Sp.SChartTypeEnum.Pie3D:case Sp.SChartTypeEnum.Doughnut2D:case Sp.SChartTypeEnum.Doughnut3D:a=this._GetPieJsonData();break;case Sp.SChartTypeEnum.MSColumn2D:case Sp.SChartTypeEnum.MSColumn3D:case Sp.SChartTypeEnum.MSLine:case Sp.SChartTypeEnum.ScrollColumn2D:case Sp.SChartTypeEnum.ScrollLine2D:case Sp.SChartTypeEnum.MSBar2D:case Sp.SChartTypeEnum.MSBar3D:a=
this._GetMSJsonData()}return a},_GetMSJsonData:function(){return{chart:this._chartAttribute,categories:[{category:this._data.category}],dataset:this._data.dataset}},_GetSingleJsonData:function(){return{chart:this._chartAttribute,data:this._data.dataset}},_GetPieJsonData:function(){Sp.applyIf(this._chartAttribute,{showPercentageInLabel:"1",legendposition:"RIGHT",chartrightmargin:"40",bgcolor:"E1E1E1,FFFFFF",showPercentInToolTip:"0"});return this._GetSingleJsonData()},_Dispose:function(){if(null!=this._chart)this._chart.dispose(),
this._chart=null,this._chartAttribute={};if(null!=this._callBackName)Sp.StatisticalChartBase.RemoveEvent(this._callBackName),this._callBackName=null;$("#"+this._divId).empty()}};Sp.SChartTypeEnum={Column2D:"Column2D",Column3D:"Column3D",Line:"Line",Pie2D:"Pie2D",Pie3D:"Pie3D",ScrollColumn2D:"ScrollColumn2D",ScrollLine2D:"ScrollLine2D",Doughnut2D:"Doughnut2D",Doughnut3D:"Doughnut3D",MSColumn2D:"MSColumn2D",MSColumn3D:"MSColumn3D",MSLine:"MSLine",Bar2D:"Bar2D",MSBar2D:"MSBar2D",MSBar3D:"MSBar3D"};Sp.StatisticalDataSource=function(a,b,c){this._dataSource=a;this._context=c==null?this._dataSource:c;this._callback=b==null?{}:b;this._fieldsArray=[];this._columnModel=null};
Sp.StatisticalDataSource.prototype={SetDataSource:function(a,b){if(null==a)throw"\u53c2\u6570dataSource\u4e0d\u80fd\u4e3a\u7a7a,\u503c\u4e3a\u6807\u51c6json\u5b57\u7b26\u4e32";this._dataSource=a;this._callback=b==null?{}:b},GetGridData:function(a){for(var b={},c=[],e=this._dataSource,f=0;f<e.message.features.length;f++)c.push(e.message.features[f].attributes);b.data=c;b.fields=this._CreateFields(e);b.columnModel=this._CreateCM(e,a);return b},GetSingleGridData:function(a){var b={},c=[],e=this._dataSource;
if(e.message.total>0)if(null==a||""==a)for(var f=1;f<e.message.columns.length;f++)a=e.message.features[0].attributes[f],c.push([e.message.columns[f].caption,a]);else for(f=0;f<e.message.features.length;f++)if(a==e.message.features[f].attributes[0]){for(var g=1;g<e.message.columns.length;g++)a=e.message.features[f].attributes[g],c.push([e.message.columns[g].caption,a]);break}b.data=c;Sp.apply(b,this._CreateSingleCM(e));return b},GetSingleDataSet:function(a,b){var c=this._dataSource,e=c.spExtendInfo==
null?{}:c.spExtendInfo,f=[];if(c.message.total>0){var g=[];if(null!=b&&b.length>0)for(var d=1;d<c.message.columns.length;d++)for(var h=0;h<b.length;h++)b[h]==c.message.columns[d].columnName&&g.push(d);else for(d=1;d<c.message.columns.length;d++)g.push(d);var i=h=0;if(a!=null&&a!="")for(d=0;d<c.message.features.length;d++)if(a==c.message.features[d].attributes[0]){i=d;break}for(d=0;d<g.length;d++){var j=c.message.features[i].attributes[g[d]];j>h&&(h=j);var k=c.message.columns[g[d]].caption;e.linkChart==
"function"&&Sp.isFunction(this._callback.fn)?f.push({label:k,value:j,link:"j-Sp.StatisticalChartBase._RaiseEvent-"+(this._callback.funName+","+c.message.features[i].attributes[0]+","+k+","+j)}):f.push({label:k,value:j})}}return{dataset:f,max:h,chartAttr:e,callback:this._callback}},GetMSDataSet:function(a){var b=this._dataSource,c=b.spExtendInfo==null?{}:b.spExtendInfo,e=[],f=[];if(b.message.total>0){var g=[];if(null!=a&&a.length>0)for(var d=1;d<b.message.columns.length;d++)for(var h=0;h<a.length;h++)a[h]==
b.message.columns[d].columnName&&g.push(d);else for(d=1;d<b.message.columns.length;d++)g.push(d);for(d=0;d<g.length;d++)f.push({seriesname:b.message.columns[g[d]].caption,data:[]});for(a=h=0;a<b.message.features.length;a++){e.push({label:b.message.features[a].attributes[0]});for(d=0;d<g.length;d++){var i=b.message.features[a].attributes[g[d]];i>h&&(h=i);c.linkChart=="function"&&Sp.isFunction(this._callback.fn)?f[d].data.push({value:i,link:"j-Sp.StatisticalChartBase._RaiseEvent-"+(this._callback.funName+
","+b.message.features[a].attributes[0]+","+b.message.columns[g[d]].caption+","+i)}):f[d].data.push({value:i})}}}return{category:e,dataset:f,max:h,chartAttr:c,callback:this._callback}},_CreateSingleCM:function(a){var b=[];a=a.spExtendInfo==null?{}:a.spExtendInfo;var c="";null!=a.numberSuffix&&(c="("+a.numberSuffix+")");b.push({menuDisabled:!0,id:"indicators",header:"\u6307\u6807\u56e0\u5b50",dataIndex:"indicators",width:100,sortable:!1},{menuDisabled:!0,id:"number",header:"\u6307\u6807\u6570\u91cf"+
c,dataIndex:"number",width:100,sortable:!1});return{columnModel:b,fields:[{name:"indicators",type:"string"},{name:"number",type:"string"}]}},_CreateCM:function(a,b){var c=[];c.push({header:"\u5e8f\u53f7",width:40,align:"center",menuDisabled:!0,renderer:function(a,b,c,d){return 1+d}});var e=[];if(null!=b&&b.length>0)for(var f=0;f<a.message.columns.length;f++){for(var g=!0,d=0;d<b.length;d++)if(b[d]==a.message.columns[f].columnName){g=!1;break}e.push(g)}else for(f=0;f<a.message.columns.length;f++)e.push(!1);
for(f=0;f<a.message.columns.length;f++)g=a.message.columns[f].caption,null!=a.message.columns[f].numberSuffix&&(g=g+"("+a.message.columns[f].numberSuffix+")"),d="",d={menuDisabled:!0,id:a.message.columns[f].columnName,header:g,dataIndex:a.message.columns[f].columnName,width:100,hidden:e[f],sortable:!1},c.push(d);return c},_CreateFields:function(a){for(var b=[],c=0;c<a.message.columns.length;c++)b.push({name:a.message.columns[c].columnName,type:"string"});return b}};Sp.TreePanel=function(a,b,c,e){c=c==null?{}:c;if(typeof a!="string")throw"\u53c2\u6570containerId\u5e94\u4e3aString";if(typeof b!="object")throw"\u53c2\u6570treeData\u5e94\u4e3aobject";this._check=c.check==null?null:c.check;this._view=c.view==null?null:c.view;this._treeDivId=a;this._treeDiv=$("#"+this._treeDivId+"");this._treeData=b;this._context=e==null?{}:e;this._tree=null;this._Init()};
Sp.TreePanel.prototype={_RaiseEvent:function(a,b){var c=this.get_events().getHandler(a);if(c){if(b===null||typeof b==="undefined")b=Sp.EventArgs.Empty;c(this,b)}},get_events:function(){if(!this._events)this._events=new Sp.EventHandlerList;return this._events},AddEvent:function(a,b,c){var e=null;e=null!=b.scope?Sp.Delegate(c,b):b;this._tree.setting.callback[a]=e},RemoveEvent:function(a){this.get_events().addHandler(a)},AddOnClickAction:function(a){this._tree.setting.callback.onClick=a},RemoveOnClickAction:function(){this._tree.setting.callback.onClick=
null},AddOnDblClickAction:function(a){this._tree.setting.callback.onDblClick=a},RemoveOnDblClickAction:function(){this._tree.setting.callback.onDblClick=null},AddOnRClickAction:function(a){this._tree.setting.callback.onRightClick=a},RemoveOnRClickAction:function(){this._tree.setting.callback.onRightClick=null},AddBeforeExpandAction:function(a){this._tree.setting.callback.beforeExpand=a},RemoveBeforeExpandAction:function(){this._tree.setting.callback.beforeExpand=null},GetTree:function(){return this._tree},
UpdateTree:function(){},ExpandAll:function(){null!=this._tree&&this._tree.expandAll(!0)},ExPandRootNode:function(){if(null!=this._tree){var a=this._tree.getNodes();null!=a&&this._tree.expandNode(a[0],!0,!0)}},CollapseAll:function(){null!=this._tree&&this._tree.expandAll(!1)},ExpandNode:function(a){null!=this._tree&&this._tree.expandNode(a,!0,!1,!0)},CollapseNode:function(a){null!=this._tree&&this._tree.expandNode(a,!1,!0,!0)},SetWidth:function(a){this.Resize(a,this._treeDiv.height())},SetHeight:function(a){this.Resize(this._treeDiv.width(),
a)},Resize:function(a,b){this._treeDiv.height(b);this._treeDiv.width(a)},Destroy:function(){if(this._tree!=null)this._tree.destroy(this._treeDivId),this._tree=null},_Init:function(){this._treeDiv.hasClass("ztree")||this._treeDiv.addClass("ztree");"auto"!=this._treeDiv.css("overflow")&&this._treeDiv.css({overflow:"auto"});var a={data:{simpleData:{enable:!0}},callback:{onExpand:Sp.Delegate(this,this._OnzTreeOnExpand),onCollapse:Sp.Delegate(this,this._OnzTreeOnCollapse)}};if(this._check!=null)a.check=
this._check;if(this._view!=null)a.view=this._view;$.fn.zTree.init(this._treeDiv,a,this._treeData);this._tree=$.fn.zTree.getZTreeObj(this._treeDivId);this._tree.expandNode(this._tree.getNodes()[0])},_OnzTreeOnExpand:function(){this._treeDiv.css("overflow")=="auto"&&(this._treeDiv.css("overflow","hidden"),this._treeDiv.css("overflow","auto"))},_OnzTreeOnCollapse:function(){this._treeDiv.css("overflow")=="auto"&&(this._treeDiv.css("overflow","hidden"),this._treeDiv.css("overflow","auto"))}};
